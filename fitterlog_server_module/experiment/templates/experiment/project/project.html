<!DOCTYPE html>

{%load static%}

<head>		
		<link rel = "stylesheet" href = {% static "/layui/css/layui.css" %} type = "text/css" />
		<link rel = "stylesheet" href = {% static "/experiment/css/scrollbar.css" %} type = "text/css" />
		<link rel = "stylesheet" href = {% static "/experiment/css/layer-skin.css" %} type = "text/css" />

		<script src = "{% static "Highcharts/highcharts.src.js" %} "></script>
		<script src = "{% static "Highcharts/themes/grid-light.js" %} "></script>

		<link rel = "stylesheet" href = {% static "/experiment/css/project/main.css" %} type = "text/css" />
		<link rel = "stylesheet" href = {% static "/experiment/css/project/left_part.css" %} type = "text/css" />
		<link rel = "stylesheet" href = {% static "/experiment/css/project/right_part.css" %} type = "text/css" />
		<link rel = "stylesheet" href = {% static "/experiment/css/project/header.css" %} type = "text/css" />
		<link rel = "stylesheet" href = {% static "/experiment/css/project/layer.css" %} type = "text/css" />

</head>

<body>
	<div id = "header"> 


		<div id = "left_header">
			<p id = "project_name">【项目】{{project.name}}</p>
		</div>

		<div id = "middle_header">
			<input id = "path_inp" class = "to_save" name = "path_inp" placeholder = "项目位置" 
			value = "{{project.path}}"></input>
			<textarea class = "to_save" id = "project_intro" name = "project_intro" placeholder = "项目介绍"
			>{{project.intro}}</textarea>
		</div>
		
		<div id = "right_header">

			<form action = "/project/{{project.id}}/new_group" method = "post">
				{% csrf_token %}

				<input type = "text" name = "name" id = "new_group_name_inp" autocomplete = "off" 
					placeholder = "新实验组名"/>
				<input type = "submit" class = "layui-icon "value = "&#xe624;" id = "new_group_button"
					title = "新建">
			</form>

			<div id = "header_button_container">
				<a class = "header_a" title = "返回" href = "/"><i class = "layui-icon">&#xe65c;</i></a>
				<a class = "header_a" title = "保存" href = "javascript:void(0);" onclick = "javascript:save_config();"><i class = "layui-icon">&#xe681;</i></a>
				<a class = "header_a" title = "新建实验" href = "javascript:void(0);" onclick = "javascript:create_ask()"><i class = "layui-icon">&#xe609;</i></a>
				<a class = "header_a" title = "设置config文件" href = "javascript:void(0);" onclick = "javascript:add_config_ask()"><i class = "layui-icon">&#xe6b2;</i></a>

			</div>
		</div>
	</div>

	<div id = "content">

		<div id = "left_part">
			<div id = "left_title">
				<p>实验组列表</p>
			</div>

			<ul id = "group_list_container">
			{% for group in groups %}
				<li 
					class = "group_list
					{%if group.name == 'default' %} 
						active_left 
					{%endif%}" 

					id = "left_content_{{group.id}}"

					group_id = "{{group.id}}"
				>
					<a class = "group_list_a" href = "/group/{{group.id}}" >
						{{group.name}}
					</a>
				</li>
			{% endfor %}
			</ul>
		</div>


		<div id = "right_part">

			{% for group in groups%}
			<div 
				class = "right_content 
				{%if group.name != 'default' %} 
					hidden 
				{% else %}
					default_right
				{%endif%}" 
				id = "right_content_{{group.id}}"
			>
				<p class = "group_name">【实验组】{{group.name}}</p>
				<div class = "chart_container">
					<div id = "container_{{group.id}}"></div>
				</div>

				<textarea class = "group_intro to_save" name = "group_intro_{{group.id}}" placeholder = "实验组介绍">{{group.intro}}</textarea>
			</div>
			{% endfor %}

		</div>

	</div>
</body>

<script>
	var configs = [
		{% for config in config_files %}
			"{{config}}",
		{% endfor %}
	]
	var config_str = configs.join("\n");

</script>


<script src = {% static "/layui/layui.js" %}></script>

<!-- 鼠标放上按钮的行为 -->
<script src = {% static "/experiment/js/project/project.js" %}></script>
<script src = {% static "/experiment/js/project/create.js" %}></script>

{% include "experiment/project/charts.html"%}
{% include "experiment/project/save_config.html"%}
{% include "experiment/project/create_new_experi.html" %}
