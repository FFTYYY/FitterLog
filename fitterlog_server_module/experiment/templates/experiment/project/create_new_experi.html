<script>

//从configs列表，生成下拉菜单
function get_config_manu()
{
	var s_1 = '<div class="layui-input-block" id="config_manu"><select>'
	var s_2 = '</select></div>'

	var mid_s = ""
	for(var i = 0;i < configs.length;i++)
	{
		mid_s += '<option value="'+configs[i]+'">'+configs[i]+'</option>'
	}

	return s_1 + mid_s + s_2
}

//实际创建实验（提交#the_create_form）
function go_new_expe()
{
	the_create_form = document.getElementById("the_create_form")
	config_manu = document.getElementById("config_manu")

	var opt = document.getElementById("start_create_expe")
	opt.value = config_manu.children[0].selectedOptions[0].value
	the_create_form.appendChild(opt)

	the_create_form.submit()
}

function create_ask()
{
	layui.use("layer", function(){
		var layer = layui.layer;

		layer.open({
			title: "<p class='title-text'>新建设置</p>" , 
			content: '																				\
			<form action = "/project/{{project.id}}/create_experiment" id = "the_create_form" method = "post">				\
				{% csrf_token %}																	\
			'
			+ get_config_manu() + 
			'<input type = "hidden" name = "config_name" value = "" id = "start_create_expe"/>\
			<a class = "layui-icon" title = "创建实验" id = "create_button" \
			href = "javascript:void(0)" onclick = "javascript:go_new_expe()">&#xe624;</a>	\
			</form>	\
			<a class = "layui-icon layui-layer-close layui-layer-close1 my-close" title = "关闭窗口">&#x1006;</a>\
			' , 
			skin: "my-skin",
			btn: [],
			resize: false,
			closeBtn: 0,
			shade: 0,

			//success : on_layer_done,
		});
	});
}

</script>