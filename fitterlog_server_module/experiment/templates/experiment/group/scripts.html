
<script>
</script>

<script> // for 保存界面设置
	var csrf_token = "{{csrf_token}}" //用于提交的密钥

	var my_project_id = {{group.project.id}}
	var save_config_url = "/group/{{group.id}}/save_config"
	var get_data_url = "/group/{{group.id}}/get_data"
</script>

<script> // for 新建实验
	var config_files = [
		{% for config in config_files %}
			"{{config}}",
		{% endfor %}
	]

</script>

<script> // 渲染表格

	function inner_temp(d , head_name){ //中间格子的模板
		// 额外的类
		ex_class = ""
		if (d.state == 3)
			ex_class += " bad-experiment "
		else if(d.state == 0)
			ex_class += " running-experiment "

		if (d.editable[head_name] == 1)
			ex_class += " editable "

		return `
			<span>${d.val[head_name]}</span>
			<div 
				my-exp-id = ${d.exp_id} 
				my-id = ${d.vid[head_name]} 
				class = "
					id-teller
					hidden 
					${ex_class}
				"
			></div>
		`
	}

	function right_temp(d){ //右侧工具栏的模板
		ex_class = ""
		if (d.state == 3)
			ex_class += " bad-experiment "
		else if(d.state == 0)
			ex_class += " running-experiment "

		return `
			<a class = "content-a layui-icon" href = "/experiment/${d.exp_id}/logs">&#xe621;</a>
			<a class = "content-a layui-icon" href = "/experiment//${d.exp_id}/figures">&#xe64a;</a>
			<a class = "content-a layui-icon" href = "javascript:void(0)" 
							onclick = "javascript:copy_expe('/${d.exp_id}')">&#xe656;</a>
			<div 
				my-exp-id = ${d.exp_id}
				class = "
					id-teller
					hidden 

					${ex_class}
				"
			></div>
		`
	}


	table_cols = [[
		//复选框列
		{
			filed 	: '_checkbox' , 
			type 	: 'checkbox' , 
			width 	: 50 ,
			fixed 	: 'left' ,
			style: 'background-color: #363636; color: #AAAAAAFF;' , 
		},
		//中间列
		{% for head , width , min_width , ex_style in head_information %}
			{
				field	:'inner-{{head}}', 
				title 	: '{{head}}',
				width 	: {{width}} , 
				minWidth: {{min_width}}, 
				sort 	: true ,
				align 	:'center', 
				templet : function(d){return inner_temp(d , '{{head}}')}, 
				{{ex_style | safe}}

			},
		{% endfor %}
		//右侧工具栏
		{
			field 	: 'right', 
			fixed 	: 'right', 
			width 	: 100, 
			align 	: 'center' , 
			style 	: 'background-color: #363636; color: #AAAAAAFF;' , 
			templet : right_temp ,
		},
	]]

</script>
